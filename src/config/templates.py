import json

from src.config import settings
from src.database.models import Subscription
from src.utils.text import text_progress_bar

BOT_NAME = 'Bypasser'
START_COMMAND_DESCRIPTION = '–ü–æ—á–∞—Ç–∏ –≤–∑–∞—î–º–æ–¥—ñ—é —ñ–∑ –±–æ—Ç–æ–º'
GUARD_SUBSCRIPTION_NEEDED_MESSAGE = '<b>üëÅ –î–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É –±–æ—Ç–∞ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –ø—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—è –Ω–∞ –∫–∞–Ω–∞–ª–∏:</b>\n\n' \
                                    '–ü—ñ—Å–ª—è –ø—ñ–¥–ø–∏—Å–∫–∏ –Ω–∞—Ç–∏—Å–Ω–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ üîÑ'
GUARD_CHECK_SUB = '–ù–æ—É –¥—Ä—É–∂–∏—â–µ, —Ç–∞–∫ –Ω–µ –ø—Ä–æ–∫–∞–Ω–∞—î. –ñ–¥—É –ø—ñ–¥–ø–∏—Å–∫–∏ ü•∑'
HANDLER_NOT_FOUND = '–ê–≥–æ–æ–≤, –∑–∞–±–ª—É–∫–∞–≤ ? üëÄ'
INFO_MSG = 'üóÑ <b>–ü–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è:</b>'

PRODUCT_NOT_FOUND = 'üîç –ü—Ä–æ–¥—É–∫—Ç –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ!\n\n' \
                    '–ù–∞ –∂–∞–ª—å, —è –Ω–µ –∑–º—ñ–≥ –∑–Ω–∞–π—Ç–∏ —Ç–∞–∫–∏–π –ø—Ä–æ–¥—É–∫—Ç —É –Ω–∞—à—ñ–π –±–∞–∑—ñ –¥–∞–Ω–∏—Ö. üòî –ú–æ–∂–ª–∏–≤–æ, –≤—ñ–Ω –±—ñ–ª—å—à–µ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∞–±–æ –±—É–≤ –≤–∏–ª—É—á–µ–Ω–∏–π –∑ –ø—Ä–æ–¥–∞–∂—É.\n\n' \
                    '–Ø–∫—â–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–∞ –¥–æ–ø–æ–º–æ–≥–∞, –±—É–¥—å –ª–∞—Å–∫–∞, –∑–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ –Ω–∞—à–æ—ó —Å–ª—É–∂–±–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏. –ú–∏ –∑ —Ä–∞–¥—ñ—Å—Ç—é –≤–∞–º –¥–æ–ø–æ–º–æ–∂–µ–º–æ! üôå'

SUBSCRIPTION_NOT_FOUND = 'üîç –ü—ñ–¥–ø–∏—Å–∫—É –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ!\n\n' \
                         '–ù–∞ –∂–∞–ª—å, —è –Ω–µ –∑–º—ñ–≥ –∑–Ω–∞–π—Ç–∏ –≤–∞—à—É –ø—ñ–¥–ø–∏—Å–∫—É —É –Ω–∞—à—ñ–π –±–∞–∑—ñ –¥–∞–Ω–∏—Ö. üòî –ú–æ–∂–ª–∏–≤–æ, –≤–æ–Ω–∞ –±—ñ–ª—å—à–µ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞ –∞–±–æ —è–∫–∏–º–æ—Å—å —á–∏–Ω–æ–º –±—É–ª–∞ –≤–∏–¥–∞–ª–µ–Ω–∞.\n\n' \
                         '–Ø–∫—â–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–∞ –¥–æ–ø–æ–º–æ–≥–∞, –±—É–¥—å –ª–∞—Å–∫–∞, –∑–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ –Ω–∞—à–æ—ó —Å–ª—É–∂–±–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏. –ú–∏ –∑ —Ä–∞–¥—ñ—Å—Ç—é –≤–∞–º –¥–æ–ø–æ–º–æ–∂–µ–º–æ! üôå'

PAYMENT_CREATION_ERROR = (
    '‚ùóÔ∏è –ü–æ–º–∏–ª–∫–∞ –ø—ñ–¥ —á–∞—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–ª–∞—Ç–µ–∂—É\n\n'
    '–ù–∞ –∂–∞–ª—å, –≤–∏–Ω–∏–∫–ª–∞ –ø—Ä–æ–±–ª–µ–º–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –≤–∞—à–æ–≥–æ –ø–ª–∞—Ç–µ–∂—É. üòî –ë—É–¥—å –ª–∞—Å–∫–∞, —Å–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.\n\n'
    '–Ø–∫—â–æ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–≤—Ç–æ—Ä—é—î—Ç—å—Å—è, –Ω–µ –≤–∞–≥–∞–π—Ç–µ—Å—å –∑–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –Ω–∞—à–æ—ó —Å–ª—É–∂–±–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏. –ú–∏ –∑ —Ä–∞–¥—ñ—Å—Ç—é –¥–æ–ø–æ–º–æ–∂–µ–º–æ –≤–∞–º –≤–∏—Ä—ñ—à–∏—Ç–∏ —Ü–µ –ø–∏—Ç–∞–Ω–Ω—è! üôå'
)

SETTING_TOKEN_ERROR = (
    '‚ùóÔ∏è –ü–æ–º–∏–ª–∫–∞ –ø—ñ–¥ —á–∞—Å –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—É\n\n'
    '–ù–∞ –∂–∞–ª—å, –≤–∏–Ω–∏–∫–ª–∞ –ø—Ä–æ–±–ª–µ–º–∞ –ø—Ä–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ —Ç–æ–∫–µ–Ω—É. üòî –ë—É–¥—å –ª–∞—Å–∫–∞, —Å–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.\n\n'
    '–Ø–∫—â–æ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–≤—Ç–æ—Ä—é—î—Ç—å—Å—è, –Ω–µ –≤–∞–≥–∞–π—Ç–µ—Å—å –∑–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –Ω–∞—à–æ—ó —Å–ª—É–∂–±–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏. –ú–∏ –∑ —Ä–∞–¥—ñ—Å—Ç—é –¥–æ–ø–æ–º–æ–∂–µ–º–æ –≤–∞–º –≤–∏—Ä—ñ—à–∏—Ç–∏ —Ü–µ –ø–∏—Ç–∞–Ω–Ω—è! üôå'
)

TOGGLE_RUN_ERROR = (
    '‚ùóÔ∏è –ü–æ–º–∏–ª–∫–∞ –ø—ñ–¥ —á–∞—Å –∑–º—ñ–Ω–∏ —Å—Ç–∞–Ω—É –±–æ—Ç–∞\n\n'
    '–ù–∞ –∂–∞–ª—å, –≤–∏–Ω–∏–∫–ª–∞ –ø—Ä–æ–±–ª–µ–º–∞. –ë—É–¥—å –ª–∞—Å–∫–∞, —Å–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.\n\n'
    '–Ø–∫—â–æ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–≤—Ç–æ—Ä—é—î—Ç—å—Å—è, –Ω–µ –≤–∞–≥–∞–π—Ç–µ—Å—å –∑–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –Ω–∞—à–æ—ó —Å–ª—É–∂–±–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏. –ú–∏ –∑ —Ä–∞–¥—ñ—Å—Ç—é –¥–æ–ø–æ–º–æ–∂–µ–º–æ –≤–∞–º –≤–∏—Ä—ñ—à–∏—Ç–∏ —Ü–µ –ø–∏—Ç–∞–Ω–Ω—è! üôå'
)

FIRST_MESSAGE_START = (
    f'–ü—Ä–∏–≤—ñ—Ç! –Ø <b>{BOT_NAME}</b>, —Ç–≤—ñ–π –ë–†–û —É —Å–≤—ñ—Ç—ñ –∫—Ä–∏–ø—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó! üëÅ\n\n'
    f'–†–∞–¥–∏–π –≤—ñ—Ç–∞—Ç–∏ —Ç–µ–±–µ —É –Ω–∞—à–æ–º—É –ø—Ä–æ—Å—Ç–æ—Ä—ñ, –¥–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó —Ç–∞ –∫—Ä–µ–∞—Ç–∏–≤–Ω—ñ—Å—Ç—å –ø–æ—î–¥–Ω—É—é—Ç—å—Å—è, —Å—Ç–≤–æ—Ä—é—é—á–∏ –±–µ–∑–º–µ–∂–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ. üöÄ\n\n'
    f'–¢—É—Ç —Ç–∏ –∑–º–æ–∂–µ—à –≤ –º–∞–π–±—É—Ç—å–Ω–æ–º—É –æ—Ç—Ä–∏–º–∞—Ç–∏ —Å–∫—Ä–∏–ø—Ç–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó —Ä—ñ–∑–Ω–∏—Ö –∫—Ä–∏–ø—Ç–æ –ø—Ä–æ–µ–∫—Ç—ñ–≤, —Ç–∞–∫–∏—Ö —è–∫ <b><a href="{settings.HAMSTER_REF_LINK}">Hamster Kombat</a>, <a href="{settings.GRASS_REF_LINK}">Grass</a>, <a href="{settings.MEMEFI_REF_LINK}">MemeFi</a>, <a href="{settings.BLUM_REF_LINK}">Blum</a> </b> —Ç–∞ –±–∞–≥–∞—Ç–æ —ñ–Ω—à–∏—Ö. üî•\n\n' \
    f'<b>üéÆ –©–æ –Ω–∞ —Ç–µ–±–µ —á–µ–∫–∞—î?</b>\n'
    f'-- –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó —Ç–≤–æ—î—ó —Ä–æ–±–æ—Ç–∏ —É —Å–≤—ñ—Ç—ñ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç.\n'
    f'-- –ï–∫—Å–∫–ª—é–∑–∏–≤–Ω—ñ —Å–∫—Ä–∏–ø—Ç–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó —Ç–∞ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ –ø–æ–ø—É–ª—è—Ä–Ω–∏–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏.\n\n'
    f'<b>–ê –≤–∂–µ –∑–∞—Ä–∞–∑</b> —É —Ç–µ–±–µ —î –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ —Å–µ–∫—Ä–µ—Ç–Ω—ñ –∫–ª—é—á—ñ –¥–ª—è —É—á–∞—Å—Ç—ñ –≤ —ñ–≥—Ä–∞—Ö –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ñ <b>Hamster Kombat</b>! üîê\n\n'
    f'–ù–∞—Ç–∏—Å–∫–∞–π –∫–Ω–æ–ø–∫—É –Ω–∏–∂—á–µ, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ —Å–≤–æ—ó –∫–ª—é—á—ñ —Ç–∞ –ø—Ä–∏—î–¥–Ω–∞—Ç–∏—Å—è –¥–æ –≥—Ä–∏. –†–∞–∑–æ–º –º–∏ –¥–æ—Å—è–≥–Ω–µ–º–æ –Ω–æ–≤–∏—Ö –≤–∏—Å–æ—Ç —É —Å–≤—ñ—Ç—ñ –∫—Ä–∏–ø—Ç–æ! üåê\n\n'
    f'–ó–∞–≤–∂–¥–∏ –Ω–∞ –∑–≤\'—è–∑–∫—É,\n'
    f'<b>{BOT_NAME}</b> üëÅ'
)

MESSAGE_START = f'–ó–Ω–æ–≤—É –Ω–∞ –∑–≤\'—è–∑–∫—É, –¥—Ä—É–∂–µ! üëã\n\n' \
                f'–©–æ –±—É–¥–µ–º–æ —Ä–æ–±–∏—Ç–∏ —Ü—å–æ–≥–æ —Ä–∞–∑—É? –°–∫—Ä–∏–ø—Ç–∏, –∫–ª—é—á—ñ, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è ‚Äî –æ–±–∏—Ä–∞–π! üöÄ\n\n' \
                f'–¢–≤—ñ–π –∫—Ä–∏–ø—Ç–æ –ë–†–û ü•∑,\n' \
                f'<b>{BOT_NAME}</b> üëÅ'

CHOOSE_HAMSTER_GAME = '<b>–í–∏–±–µ—Ä–∏ –≥—Ä—É, —è–∫—É —Ö–æ—á–µ—à ü¶Ü–∫–Ω—É—Ç—å –≤ —Ö–æ–º—è—á–µ–ª—ñ: ‚ö°</b>Ô∏è'
CODE_NOT_FOUND = '–°–æ—Ä—ñ –¥—Ä—É–∂–∏—â–µ, –∫–æ–¥–∏ –∑–∞–∫—ñ–Ω—á–∏–ª–∏—Å—è ü§Ø –ê–ª–µ –Ω–µ–∑–∞–±–∞—Ä–æ–º –≤–æ–Ω–∏ –∑\'—è–≤–ª—è—Ç—å—Å—è. –°–ø—Ä–æ–±—É–π —Ç—Ä—ñ—à–∫–∏ –ø—ñ–∑–Ω—ñ—à–µ ü•∑'
HAMSTER_KOMBAT_MENU_MSG = (
    f'‚öîÔ∏è <a href="{settings.HAMSTER_REF_LINK}">Hamster Kombat</a> ‚öîÔ∏è\n'
    f'üöÄ <b>–í—ñ–∑—å–º–∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –¥—Ä–æ–ø–æ–º!</b>\n'
    f'üîë –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–ª—é—á—ñ–≤ —Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è - –≤–∏–∂–º–∏ –º–∞–∫—Å–∏–º—É–º –∑ –∫–æ–∂–Ω–æ—ó –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ! üí•'
)

HAMSTER_CLAIMER_DESCRIPTION = (
    f'üöÄ <b>–ê–≤—Ç–æ –±–æ—Ç</b> <a href="{settings.HAMSTER_REF_LINK}">Hamster Kombat</a>\n\n'
    f'üí° <i>–û—Å–Ω–æ–≤–Ω–∏–π –∫—Ä–∏—Ç–µ—Ä—ñ–π –¥—Ä–æ–ø—É –≤ —Ö–æ–º—è–∫—É - –ø–∞—Å–∏–≤–Ω–∏–π –¥–æ—Ö—ñ–¥</i>. –¢–æ–º—É —è –≤–∏—Ä—ñ—à–∏–≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑—É–≤–∞—Ç–∏ —Ü–µ–π –ø—Ä–æ—Ü–µ—Å, '
    f'—â–æ–± <u>–≤–∏–∂–∞—Ç–∏ –º–∞–∫—Å–∏–º—É–º</u> –∑ —Ü—å–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É üí∞üî•\n\n'
    f'ü§ñ –Ø, <b>{BOT_NAME}</b>, –±—É–¥—É –∑–±–∏—Ä–∞—Ç–∏ —Ç–≤–æ—ó –º–æ–Ω–µ—Ç–∏ –∫–æ–∂–Ω—ñ —Ç—Ä–∏ –≥–æ–¥–∏–Ω–∏ - 24/7, —â–æ–± —Ç–∏ –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏–≤ –∂–æ–¥–Ω–æ—ó –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ!\n\n'
    f'<b>–ë—ñ–ª—å—à–µ –º–æ–Ω–µ—Ç = –±—ñ–ª—å—à–∏–π –ø–∞—Å–∏–≤–Ω–∏–π –¥–æ—Ö—ñ–¥</b> üíµ'
)


def enter_token_from_instruction(instruction_link: str) -> str:
    return f'<b>–í—ñ–¥–ø—Ä–∞–≤—Ç–µ —Ç–æ–∫–µ–Ω, —è–∫–∏–π –≤–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ –∑–≥—ñ–¥–Ω–æ <a href="{instruction_link}">—ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó</a>:</b>'


def seems_you_enter_invalid_token(instruction_link: str) -> str:
    return (
        f'–ó–¥–∞—î—Ç—å—Å—è –≤–∏ –≤–≤–µ–ª–∏ –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏–π —Ç–æ–∫–µ–Ω ü§∑‚Äç‚ôÇÔ∏è –î–æ—Ç—Ä–∏–º—É–π—Ç–µ—Å—å <a href="{instruction_link}">—ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó</a> üìí\n\n'
        '<b>–Ø–∫—â–æ –≤–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ –≤ –∫–æ—Ä–µ–∫—Ç–Ω–æ—Å—Ç—ñ —Ç–æ–∫–µ–Ω—É, —Å–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑. –ú–æ–∂–ª–∏–≤–æ —Ü–µ —Ç—Ä–∞–ø–∏–ª–æ—Å—è –≤–∏–ø–∞–¥–∫–æ–≤–æ üò≥</b>'
    )


def auto_claimer_payment_explanation(price: float) -> str:
    return (
        f'üîí <b>–î–æ—Å—Ç—É–ø –¥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –∑–±–æ—Ä—É</b>\n\n'
        f'–ß–µ—Ä–µ–∑ –æ–±–º–µ–∂–µ–Ω—ñ —Ä–µ—Å—É—Ä—Å–∏, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–±—ñ—Ä –º–æ–∂–ª–∏–≤–∏–π –ª–∏—à–µ –∑–∞ —É–º–æ–≤–∏ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ—ó –æ–ø–ª–∞—Ç–∏. '
        f'<b>–í–∞—Ä—Ç—ñ—Å—Ç—å –¥–æ—Å—Ç—É–ø—É –¥–æ –±–æ—Ç–∞ –Ω–∞ 3 —Ç–∏–∂–Ω—ñ —Å–∫–ª–∞–¥–∞—î <u>–≤—Å—å–æ–≥–æ {price:.1f}$</u>.</b> üí∏\n\n'
        f'üíª –í–∞–º –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ, —â–æ–± –≤–∞—à –∫–æ–º–ø\'—é—Ç–µ—Ä –±—É–≤ –≤–∫–ª—é—á–µ–Ω–∏–π. –í—Å–µ –±—É–¥–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –Ω–∞ –º–æ—ó—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö! '
        f'–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –∑—Ä—É—á–Ω—ñ—Å—Ç—å —Ç–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å ‚úÖ\n\n'
        f'–¢–≤—ñ–π, <b>{BOT_NAME}</b> üëÅ'
    )


def code_generated_msg(code: str, game_name: str, hamster_combat_link, keys_used: int, keys_limit) -> str:
    return f'ü§ù –¢—Ä–∏–º–∞–π –∫–æ–¥ –¥–ª—è: <a href="{hamster_combat_link}">{game_name}</a>\n' \
           f'üîã <b>–ö–ª—é—á—ñ–≤ –∑–∞–ª–∏—à–∏–ª–æ—Å—è:</b> {keys_limit - keys_used}/{keys_limit}\n\n' \
           f'üìä <b>–ü—Ä–æ–≥—Ä–µ—Å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:</b>\n' \
           f'{text_progress_bar(capacity=keys_limit, used=keys_used)}\n\n' \
           f'üîë –ö–ª—é—á: <code>{code}</code>'


def referral_info_msg(ref_link: str, total_ref_count: int = 0, active_ref_count: int = 0) -> str:
    if total_ref_count == 0 or total_ref_count is None or active_ref_count is None:
        conversion = 0
    else:
        conversion = active_ref_count / total_ref_count * 100

    return f'<b>–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞, –±—É–¥—å –¥—Ä—É–≥–æ–º</b> ü´£\n' \
           f'<i>—Ç–∞ –æ—Ç—Ä–∏–º–∞–π –ø–æ–≤–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –±–æ—Ç–∞</i> üí†\n\n' \
           f'üë®‚Äçüë®‚Äçüë¶‚Äçüë¶ <b>–í—Å—å–æ–≥–æ –∑–∞–ø—Ä–æ—à–µ–Ω–æ:</b> <code>{total_ref_count}</code>\n' \
           f'üîã <b>–ê–∫—Ç–∏–≤–Ω—ñ —Ä–µ—Ñ–µ—Ä–∞–ª–∏: <code>{active_ref_count}</code></b>\n' \
           f'‚ôªÔ∏è <b>–ö–æ–Ω–≤–µ—Ä—Å—ñ—è:</b> <code>{conversion:.2f}%</code>\n\n' \
           f'üìé <b>–õ—ñ–Ω–∫:</b> {ref_link}'


def keys_limit_msg(ref_link: str, keys_used: int = 0, keys_limit: int = 0) -> str:
    limit_msg = "–î—Ä—É–∂–µ, –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ —Ç–∏ –¥–æ—Å—è–≥ –ª—ñ–º—ñ—Ç—É –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –∫–ª—é—á—ñ–≤ –¥–ª—è —Ü—ñ—î—ó –≥—Ä–∏.\n\n" \
        if keys_used >= keys_limit else ""

    return f'{limit_msg}' \
           f'ü™´ <b>–ö–ª—é—á—ñ–≤ –∑–∞–ª–∏—à–∏–ª–æ—Å—è:</b> {keys_limit - keys_used}/{keys_limit}\n\n' \
           f'<b>–î–ª—è —Ç–æ–≥–æ, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –±—ñ–ª—å—à–µ –∫–ª—é—á—ñ–≤ - –∑–∞–ø—Ä–æ—Å–∏ –¥—Ä—É–≥–∞. –ö–æ–∂–µ–Ω –¥—Ä—É–≥ = +2 –∫–ª—é—á–∞</b>\n\n' \
           f'üìé<b>–ü–æ—Å–∏–ª–∞–Ω–Ω—è –¥–ª—è –¥—Ä—É–≥–∞:</b>\n{ref_link}'


def buy_subscription_btn_text(sub_price: int) -> str:
    return f'üëâ –û—Ñ–æ—Ä–º–∏—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫—É –∑–∞ {sub_price}$ ‚úÖ'


def generate_payload(user_id: int, amount: float, product_name: str) -> str:
    return json.dumps(dict(
        user_id=user_id,
        amount=amount,
        product_name=product_name
    ))


def subscription_successfully_activated(product_name: str, subscription: Subscription) -> str:
    return (
        f'üéâ –ü—ñ–¥–ø–∏—Å–∫–∞ –Ω–∞ <b>{product_name}</b> —É—Å–ø—ñ—à–Ω–æ –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–∞! ‚úÖ\n\n'
        f'üìÖ –î—ñ–π—Å–Ω–∞ –¥–æ: <b>{subscription.end_date.strftime("%d.%m.%Y")}</b>\n\n'
        f'–î—è–∫—É—î–º–æ –∑–∞ –¥–æ–≤—ñ—Ä—É! üí™\n\n'
        f'üëâ –ù–∞—Ç–∏—Å–Ω–∏ /start —â–æ–± –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –≤–∑–∞—î–º–æ–¥—ñ—é –∑—ñ –º–Ω–æ—é ü§ñ'
    )


def claimer_bot_menu(subscription: Subscription) -> str:
    return (
        f'üéâ –ü—ñ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞! ‚úÖ\n'
        f'üìÖ –î—ñ–π—Å–Ω–∞ –¥–æ: <b>{subscription.end_date.strftime("%d.%m.%Y")}</b>\n\n'
        f'üëâ <b>–í–∏–±–µ—Ä—ñ—Ç—å –¥—ñ—é:</b>'
    )


def notification_prepear(text: str) -> str:
    return (
        f'<b>–ë—É–¥–µ –≤–∏–∫–æ–Ω–∞–Ω–∞ —Ä–æ–∑—Å–∏–ª–∫–∞ –¥–ª—è –≤—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –±–æ—Ç–∞!</b>\n'
        f'<b>–¢–µ–∫—Å—Ç —Ä–æ–∑—Å–∏–ª–∫–∏:</b>\n\n'
        f'{text}'
    )
